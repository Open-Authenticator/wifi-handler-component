<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WiFi Handler component: src/wifi_handler_station.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WiFi Handler component
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">WiFi Handler component for open authenticator.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">wifi_handler_station.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="wifi__handler__station_8h_source.html">wifi_handler_station.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for wifi_handler_station.c:</div>
<div class="dyncontent">
<div class="center"><img src="wifi__handler__station_8c__incl.png" border="0" usemap="#src_2wifi__handler__station_8c" alt=""/></div>
<map name="src_2wifi__handler__station_8c" id="src_2wifi__handler__station_8c">
<area shape="rect" title=" " alt="" coords="825,5,1013,32"/>
<area shape="rect" href="wifi__handler__station_8h.html" title=" " alt="" coords="836,80,1003,107"/>
<area shape="rect" title=" " alt="" coords="5,155,76,181"/>
<area shape="rect" title=" " alt="" coords="101,155,253,181"/>
<area shape="rect" title=" " alt="" coords="277,155,394,181"/>
<area shape="rect" title=" " alt="" coords="419,155,596,181"/>
<area shape="rect" title=" " alt="" coords="621,155,733,181"/>
<area shape="rect" title=" " alt="" coords="757,155,845,181"/>
<area shape="rect" title=" " alt="" coords="869,155,970,181"/>
<area shape="rect" title=" " alt="" coords="995,155,1079,181"/>
<area shape="rect" title=" " alt="" coords="1103,155,1189,181"/>
<area shape="rect" title=" " alt="" coords="1213,155,1287,181"/>
<area shape="rect" title=" " alt="" coords="1311,155,1407,181"/>
<area shape="rect" title=" " alt="" coords="1431,155,1514,181"/>
<area shape="rect" title=" " alt="" coords="1539,155,1625,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed87efc6b4d589ef8b3a139b38929bf4"><td class="memItemLeft" align="right" valign="top">wifi_ap_record_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wifi__handler__station_8c.html#aed87efc6b4d589ef8b3a139b38929bf4">get_wifi_station_info</a> ()</td></tr>
<tr class="memdesc:aed87efc6b4d589ef8b3a139b38929bf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the information about the currently connected access point.  <a href="wifi__handler__station_8c.html#aed87efc6b4d589ef8b3a139b38929bf4">More...</a><br /></td></tr>
<tr class="separator:aed87efc6b4d589ef8b3a139b38929bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3807c93b9a639cbbea2a53331f13e6f3"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wifi__handler__station_8c.html#a3807c93b9a639cbbea2a53331f13e6f3">start_wifi_station</a> (char *wifi_station_info_json)</td></tr>
<tr class="memdesc:a3807c93b9a639cbbea2a53331f13e6f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">starts wifi and connects to access points which are passed as json string to this function  <a href="wifi__handler__station_8c.html#a3807c93b9a639cbbea2a53331f13e6f3">More...</a><br /></td></tr>
<tr class="separator:a3807c93b9a639cbbea2a53331f13e6f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1129b77fc950eda95172014bc1510f7e"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="wifi__handler__station_8c.html#a1129b77fc950eda95172014bc1510f7e">stop_wifi_station</a> ()</td></tr>
<tr class="memdesc:a1129b77fc950eda95172014bc1510f7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">disconnects from currently connected AP and turns off wifi  <a href="wifi__handler__station_8c.html#a1129b77fc950eda95172014bc1510f7e">More...</a><br /></td></tr>
<tr class="separator:a1129b77fc950eda95172014bc1510f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aed87efc6b4d589ef8b3a139b38929bf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed87efc6b4d589ef8b3a139b38929bf4">&#9670;&nbsp;</a></span>get_wifi_station_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wifi_ap_record_t* get_wifi_station_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the information about the currently connected access point. </p>
<dl class="section return"><dt>Returns</dt><dd>wifi_ap_record_t* returns pointer to a static instance of wifi_ap_record_t, if esp32 is not connected to any access point, it return NULL </dd></dl>

</div>
</div>
<a id="a3807c93b9a639cbbea2a53331f13e6f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3807c93b9a639cbbea2a53331f13e6f3">&#9670;&nbsp;</a></span>start_wifi_station()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t start_wifi_station </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>wifi_station_info_json</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>starts wifi and connects to access points which are passed as json string to this function </p>
<p>wifi_station_info_json --&gt; json structure is as follows:</p>
<p>{ "c": 3 (max 10, int, set by macro WIFI_MAX_STATIONS), "s": ["hello", "bye", "df"], "p": ["fakee", "nice", "ddddfs"] }</p>
<p>these ssid and pass are corresponding according to their array location, i.e pass of ssid[0] = pass[0] and so on</p>
<p>Flow of this function is as follows: 1) Tries to connect to the first wifi AP specified in the json string 1.1) If connected successfully return ESP_OK 1.2) If fails, then tries to reconnect, keeps on trying WIFI_RECONNECT_RETRY_ATTEMPTS times 1.2.1) If connected successfully return ESP_OK 1.2.2) If fails after retrying WIFI_RECONNECT_RETRY_ATTEMPTS times, fetches new wifi ssid from json string and goes back to step 1) 2) If it failed to connect to all wifi APs from the json string return ESP_FAIL</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wifi_station_info_json</td><td>json string which contains information about number of AP to which to try to connect to, and also their ssid and passwords </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>esp_err_t ESP_OK if connected successfully, WIFI_ERR_ALREADY_RUNNING if wifi is already running, WIFI_ERR_STA_INFO if the given station info is incorrect, WIFI_ERR_NOT_CONNECTED if it couldn't connect to any wifi network given in the list </dd></dl>

</div>
</div>
<a id="a1129b77fc950eda95172014bc1510f7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1129b77fc950eda95172014bc1510f7e">&#9670;&nbsp;</a></span>stop_wifi_station()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t stop_wifi_station </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>disconnects from currently connected AP and turns off wifi </p>
<dl class="section return"><dt>Returns</dt><dd>esp_err_t ESP_OK </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
